<link rel="import" href="../../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<!-- TODO: remove once polymer has the tooltip component again
-->
<link rel="import" href="../mdl-import.html">

<dom-module id="visingo-toolbar">
  <!-- https://www.polymer-project.org/1.0/docs/devguide/styling.html#external-stylesheet 
  <link rel="import" type="css" href="./visingo-tooltip.css"-->

  <style>
    iron-icon.green {
      color: lightgreen;
    }
    iron-icon.red {
      color: indianred;
    }
  </style>

  <template>
    
    <!-- Main Toolbar -->
    <paper-toolbar id="visingoToolbar">

    <!-- Toolbar actions -->
    <paper-icon-button icon="refresh"></paper-icon-button>
    <!-- Toolbar menu -->
    <iron-selector attr-for-selected="data-route" selected="{{route}}">
      <paper-icon-button data-route="new" icon="av:queue"></paper-icon-button>
      <paper-icon-button data-route="help" icon="help"></paper-icon-button>
    </iron-selector>

    <!-- Indicate availability of Qt -->
    <iron-icon id="qtAvailabilityIcon" icon="settings-input-antenna" class="red"></iron-icon>
    <div class="mdl-tooltip mdl-tooltip--large" for="qtAvailabilityIcon">
      Qt availability:<br>
      <span>{{qtConnectedText}}</span>
    </div>

    <span class="flex"></span>

    <!-- Application name -->
    <div class="paper-font-display2 app-name">Visingo</div>

    </paper-toolbar>
  </template>
</dom-module>
<script>
  (function() {
    Polymer({
      is: 'visingo-toolbar',

      properties: {
        route: {
          type: String,
          notify: true
        },
        qtConnected: {
          type: Boolean,
          value: false,
          observer: '_qtConnectedChanged'
        },
        qtConnectedText: {
          type: String,
          value: 'not connected'
        }
      },
      
      created: function() {
        // set visingo-toolbar to have paper-header class
        this.toggleClass('paper-header', true);
      },

      _qtConnectedChanged: function(newValue, oldValue) {
        var qtA = this.$.qtAvailabilityIcon;
        qtA.toggleClass('green', newValue);
        qtA.toggleClass('red',  !newValue);
        this.qtConnectedText = newValue ? 'connected' : 'not connected';
      }
    });
  })();
</script>


<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Index - Visingo</title>

  <!-- webcomponents -->
  <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <!-- Qt javascript channel etc. -->
  <link rel="import" href="elements/scripts.html">
  <!-- Polymer elements, own elements -->
  <link rel="import" href="elements/elements.html">
  <link rel="import" href="elements/routing.html">

  <style is="custom-style">
    paper-button {
      background: var(--accent-color);
      color: #000;
    }
    paper-button::shadow #ripple {
      color: blue;
    }
    /*paper-button[disabled] {
      border: 5px dotted rgba(100, 100, 100, 0.2);
    }*/
  </style>
</head>

<body unresolved class="fullbleed layout vertical">
<template is="dom-bind" id="app">
<iron-ajax id="ajaxDisconnectedModeEnabledVisualizers"
  url="visualizers/disconnected-mode-enabled.json"
  handle-as="json"
  on-response="setDcModeVisualizers"
  ><!-- TODO: on-error, use on-response handler to set dcMode = dcMode || {}; dcMode.visualizers = ... -->
</iron-ajax>
<paper-header-panel>

<!-- toolbar, two way bind route since menu is in toolbar -->
<visingo-toolbar id="visingoMainToolbar" route={{route}}></visingo-toolbar>

<!-- Main Content -->
<div class="content">
  <iron-pages attr-for-selected="data-route" selected="{{route}}" class="padded">

  <section data-route="new">
    <paper-material elevation="1">
      <h2 class="paper-font-display2">New visualization</h2>
      <form is="iron-form" id="formNewVis" method="post" action="/">

        <div>
          <h4>Visualization type</h4>
          <paper-radio-group selected="{{visualizationType}}">
            <paper-radio-button name="playback">Playback</paper-radio-button>
            <template is="dom-if" if="{{qtConnected}}">
            <!-- TODO: Show message and switch to playback if connection cut.
                       Also cascade the effect, visualizers should change to disconnected
                       mode enabled ones only. -->
            <paper-radio-button name="interactive">Interactive</paper-radio-button>
            </template>
          </paper-radio-group>
        </div>
        <div>
          <h4>Visualization module</h4>
          <visingo-visualizer-chooser visualizers="[[visualizers]]" chosen="{{chosenVisualizer}}"></visingo-visualizer-chooser>
        </div>

        <!--<paper-button raised onClick="app.initMapping(document.querySelector('#chosen-visualizer').value);">Next</paper-button>-->
      </form>
    </paper-material>


    <iron-pages attr-for-selected="visualization-type" selected="{{visualizationType}}">

      <section visualization-type="playback">
        <paper-material elevation="1">
          <div>
            <h4>Playback log file type</h4>
            <paper-radio-group name="playbackInputType" selected="claspLog">
              <paper-radio-button name="claspLog">Output log</paper-radio-button>
              <paper-radio-button name="claspJSON">JSON</paper-radio-button>
            </paper-radio-group>
          </div>
          <div style="max-width:400px;">
            <h4>Choose log file</h4>
            <visingo-file-chooser files="{{solverLogFile}}"></visingo-file-chooser>
          </div>
          <div>
            <!-- TODO: parse button only needed when type is log, json type
                       should be set to app.playbackInputFile directly. -->
            <visingo-parse-button status="{{parseStatus}}" files="[[solverLogFile]]" parsed="{{inputFiles}}"></visingo-parse-button>
          </div>

          
        </paper-material>
      </section>
      
      <section visualization-type="interactive">
        <paper-material elevation="1">
          <h4>Interactivity specific settings</h4>
          <div>Not yet implemented.</div>
        </paper-material>
      </section>

    </iron-pages>

    <paper-material elevation="1">
      <!-- Load mapping and settings from visualization module -->
      <visingo-visualizer-settings visualizer="[[chosenVisualizer]]" parse-status="[[parseStatus]]" visualization-type="[[visualizationType]]" input-files="[[inputFiles]]"></visingo-visualizer-settings>
    </paper-material>

    <paper-material elevation="1">
      <div id="output">None</div>
    </paper-material>

    <paper-material elevation="1">
    <p>route is: <input id="tmpshowroute" value="{{route}}"></p>
    </paper-material>

    <paper-material elevation="1">
      <visualizer-predicates id="visPredicates"></visualizer-predicates>
    </paper-material>
  </section>

  <section data-route="help">
    <paper-material elevation="1">
    <h2 class="paper-font-display2">Help</h2>
    <p>This is the help section</p>
    </paper-material>
  </section>

  </iron-pages>
</div>

</paper-header-panel>
</template> <!-- end template dom-bind -->

<script src="scripts/app.js"></script>
<script src="scripts/index.js"></script>

</body>
</html>

